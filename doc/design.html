<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Design</title>
</head>

<body>
<h1>Design</h1>
<p><a href="index.html">Back To Top Page</a></p>
<h2>Purpose</h2>
<p>Detail the design of libBsdSockets.</p>
<h2>Overview</h2>
<p>libBsdSockets is a C++ wrapper implementation of the bsd socket calls:</p>
<ul>
	<li>socket()</li>
	<li>close()</li>
	<li>read()</li>
	<li>write()</li>
	<li>bind()</li>
	<li>listen()</li>
	<li>accept()</li>
	<li>connect()</li>
	<li>select()</li>
	<li>poll()</li>
	<li>getsockopt()</li>
	<li>setsockopt()</li>
</ul>
<p>Note: Due to the varargs employed by ioctl(), this cannot be included. 
However, the raw socket will be available if needed for such calls.</p>
<p>Additionally, network address handling is handled because that is related and 
cumbersome.</p>
<h3>Premises</h3>
<p>Decisions are made based upon the following general premises:</p>
<ol>
	<li>Bleeding is to be minimized, of course.&nbsp; It should be avoided, but not necessarilly at the expense of lots 
	of duplication.</li>
	<li>Prefer const objects -- objects that do not undergo state changes after 
	construction.&nbsp; This makes code more complicated for initialization, but 
	simplifies the rest of the code and the usage.</li>
	<li>Doxygen comments can go in .h files since their causing recompilation is 
	not an issue.</li>
</ol>
<h3>Top Level Breakdown</h3>
<p>libBsdSockets consists of the following parts:</p>
<ul>
	<li><a href="#address-info">Address Info</a> -- A collection of constants and helpers.</li>
	<li><a href="#address-classes">Address Classes</a> -- A collection of tools to handle addresses used in connect() 
	and accept().</li>
</ul>
<div id="bleeding">
<h2>Bleeding</h2>
<p>Bleeding is the exposure of the underlying implementation to the callers.&nbsp; 
This appears in several ways:</p>
	<ul>
		<li>concepts</li>
		<li>data types</li>
		<li>constants</li>
		<li>headers</li>
	</ul>
	<p>The entire concept, of course, is a bleed.&nbsp; The objective is to 
	present the concept in an easier to use form.</p>
	<p>Data types are a big thing we are trying to avoid exposing.&nbsp; 
	Particularly as they pertain to requiring headers and exposing tedious work 
	to the user.&nbsp; Ultimately, however, the caller may need to do things 
	like ioctl which we can't provide ourselves due to the varargs.&nbsp; As 
	such, raw data types are typically available but as forward-declarable 
	references or pointers to avoid bleeding headers.</p>
	<p>There are a lot of constants in the BSD sockets.&nbsp; If there is a 
	reasonable list that we can encapsulate, we do so.&nbsp; If the list is 
	volatile or dependent upon the platform, then we may elect to expose the 
	constant because not doing so may limit the caller's options.</p>
	<p>Headers are a pain in the tail. A main objective is to avoid requiring 
	the system headers being included.&nbsp; Obviously, as said above, the 
	caller is free to include them if it is necessary to perform operations on 
	raw data structures beyond the scope of this project.</p>
</div>

<h2>Addresses</h2>
<div id="address-info">
	<h3>Address Info</h3>
	<p>Address Info is a collection of constants and helpers.&nbsp; For 
	simplicity, the conversion utilities are done with hard if/else statements.&nbsp; 
	Mapping would have been better; however, I couldn't guarantee someone 
	wouldn't create a static instance before the maps were initialized.&nbsp; I 
	could lazy-initialize them, but that would add its own overhead.</p>
</div>

<div id="address-classes">
	<h3>Address Classes</h3>
	<p>The Address classes simplify and encapsulate the low-level details.</p>
	<p>The Address base class provides the common information for all types of 
	addresses and a pure-virtual method to access the RawAddress.&nbsp; 
	Including RawAddress.h requires including low-level headers; however, most 
	users should never need that.</p>
	<p>Address Derived classes for Internet and Local Sockets (formerly Unix 
	Domain Sockets) are provided.&nbsp; There is nothing special that prevents 
	callers from creating their own Address-derived classes for other purposes.</p>
</div>

<h1>End</h1>
</body>

</html>
