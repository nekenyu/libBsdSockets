<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>libBsdSockets: Design Documentation For libBsdSockets</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libBsdSockets
   </div>
   <div id="projectbrief">C++ Wrapper classes to the BSD Socket API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('design.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Design Documentation For libBsdSockets </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#premises">Premises</a><ul><li class="level2"><a href="#ease-of-use">Ease Of Use</a></li>
<li class="level2"><a href="#thread-safety">Thread Safety</a></li>
<li class="level2"><a href="#bleeding">Bleeding</a></li>
<li class="level2"><a href="#const_objects">Const Objects</a></li>
<li class="level2"><a href="#shared_ptr">shared_ptr Usage</a></li>
</ul>
</li>
<li class="level1"><a href="#architecture">Architecture</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>ibBsdSockets is a C++ wrapper implementation of the bsd socket calls:</p>
<ul>
<li>socket()</li>
<li>close()</li>
<li>read()</li>
<li>write()</li>
<li>bind()</li>
<li>listen()</li>
<li>accept()</li>
<li>connect()</li>
<li>select()</li>
<li>poll()</li>
<li>getsockopt()</li>
<li>setsockopt()</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Due to the varargs employed by ioctl(), this cannot be included. However, the raw socket will be available if needed for such calls.</dd></dl>
<p>Additionally, address handling is include because it is related and cumbersome.</p>
<h1><a class="anchor" id="premises"></a>
Premises</h1>
<h2><a class="anchor" id="ease-of-use"></a>
Ease Of Use</h2>
<p>The library should be easy to use in the general case, should not inhibit the fringe cases, and should support threading.</p>
<h2><a class="anchor" id="thread-safety"></a>
Thread Safety</h2>
<p>Thes objects created by this library may only be used in the thread they were created in. Different threads may create different objects. For example, multiple threads may create their own ClientSocket.</p>
<p>Sockets accepted from a ServerSocket must remain in the same thread as the ServerSocket. Sockets accepted into a new thread create a new C++11 thread with a function or function object to run.</p>
<p>With the exception of accepting a thread into a new server, there are no built in threading facilities as they would most likely need to include logic and data from the users of the library. Accepting a socket into a new thread was a clear need. For portability, C++11 threads were chosen despite the fact that they may conflict with potential users.</p>
<h2><a class="anchor" id="bleeding"></a>
Bleeding</h2>
<p>Bleeding is the exposure of the underlying implementation to the callers. This appears in several ways: conceptsdata typesconstantsheadersThe entire concept, of course, is a bleed. The objective is to present the concept in an easier to use form.</p>
<p>Data types are a big thing we are trying to avoid exposing. Particularly as they pertain to requiring headers and exposing tedious work to the user. Ultimately, however, the caller may need to do things like ioctl which we can't provide ourselves due to the varargs. As such, low-level data types are typically available but as forward-declarable references or pointers to avoid bleeding headers.</p>
<p>There are a lot of constants in the BSD sockets. If there is a reasonable list that we can encapsulate, we do so. If the list is volatile or dependent upon the platform, then we may elect to expose the constant because not doing so may limit the caller's options.</p>
<p>Headers are a pain in the tail. A main objective is to avoid requiring the system headers being included. Obviously, as said above, the caller is free to include them if it is necessary to perform operations on low-level data structures beyond the scope of this project.</p>
<h2><a class="anchor" id="const_objects"></a>
Const Objects</h2>
<p>As a general rule, transition of state within an object is minimized. This reduces complexity and usage of the classes.</p>
<p>Examples:</p>
<ul>
<li>Addresses cannot be modified after creation, only read. Once initialized, there is nothing to check.</li>
<li>Sockets open on construct and close on destruct. That just leaves connect/bind &amp; listen &ndash; an issue still to be addressed.</li>
</ul>
<h2><a class="anchor" id="shared_ptr"></a>
shared_ptr Usage</h2>
<p>The nature of moving slice-able base classes around led to pointers. Pointers lead to problems. So, the library has adopted shared_ptr usage everywhere. Even classes provide these typedefed. For example, Socket::Ptr is a <code>typedef std::shared_ptr&lt;Socket&gt;;</code> It can be noted that to decouple dependency, there are some places that forward declare a class and explicitly use std::shared_ptr&lt;Socket&gt; to avoid lo9ts of includes.</p>
<h1><a class="anchor" id="architecture"></a>
Architecture</h1>
<p>libBsdSockets consists of the following parts:</p>
<ul>
<li><a class="el" href="general-support-design.html">General Support</a> &ndash; i.e. AddressInfo</li>
<li><a class="el" href="low-level-address-design.html">Low-Level Address</a> &ndash; Low-Level bits of Addresses encapsulated to avoid bleeding, but still available.</li>
<li><a class="el" href="address-design.html">Address</a> &ndash; Address class and its derived classes supporting the various types of socket addresses</li>
<li><a class="el" href="socket-design.html">Socket</a> &ndash; Actual Sockets for Server, Client, etc. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 27 2013 22:17:27 for libBsdSockets by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
